<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Render Buildings — render_buildings • rayshader</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Render Buildings — render_buildings"><meta property="og:description" content="Adds 3D polygons with roofs to the current scene,
using latitude/longitude or coordinates in the reference system defined by the extent object."><meta property="og:image" content="https://www.rayshader.com/reference/figures/website.jpg"><meta property="og:image:alt" content="Picture of a 3D map made with rayshader"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@tylermorganwall"><meta name="twitter:site" content="@tylermorganwall"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rayshader</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.38.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials/Blog Posts

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://www.tylermw.com/adding-open-street-map-data-to-rayshader-maps-in-r/" class="external-link">Tutorial: Adding Open Street Map Data to Rayshader Maps in R</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/a-step-by-step-guide-to-making-3d-maps-with-satellite-imagery-in-r/" class="external-link">A Step-by-Step Guide to Making 3D Maps with Satellite Imagery in R</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-ggplots-with-rayshader/" class="external-link">Introducing 3D ggplots with rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/portrait-mode-data/" class="external-link">Portrait Mode for Data: Rayshader + Rayfocus</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-printing-rayshader/" class="external-link">From R to Reality: 3D Printing Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-maps-with-rayshader/" class="external-link">Slicing Through Monterey Bay: Creating 3D Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/making-beautiful-maps/" class="external-link">Draining Lake Mead: Making Beautiful Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/throwing-shade/" class="external-link">Throwing Shade at the Cartographer Illuminati: Raytracing the Washington Monument in R</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>

    Changelog
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>

    functions
  </a>
</li>
<li>
  <a href="https://github.com/tylermorganwall/rayshader" class="external-link">
    <span class="fa fa-github fa-lg"></span>

    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Render Buildings</h1>
    <small class="dont-index">Source: <a href="https://github.com/tylermorganwall/rayshader/blob/master/R/render_buildings.R" class="external-link"><code>R/render_buildings.R</code></a></small>
    <div class="hidden name"><code>render_buildings.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds 3D polygons with roofs to the current scene,
using latitude/longitude or coordinates in the reference system defined by the extent object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">render_buildings</span><span class="op">(</span></span>
<span>  <span class="va">polygon</span>,</span>
<span>  <span class="va">extent</span>,</span>
<span>  material <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>  roof_material <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  angle <span class="op">=</span> <span class="fl">45</span>,</span>
<span>  zscale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  scale_data <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  relative_heights <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  heights_relative_to_centroid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  roof_height <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  base_height <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  data_column_top <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_column_bottom <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heightmap <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  holes <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  flat_shading <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  light_altitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">45</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  light_direction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">315</span>, <span class="fl">225</span><span class="op">)</span>,</span>
<span>  light_intensity <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  light_relative <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  clear_previous <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-polygon">polygon<a class="anchor" aria-label="anchor" href="#arg-polygon"></a></dt>
<dd><p><code>sf</code> object, "SpatialPolygon" <code>sp</code> object,  or xy coordinates
of polygon represented in a way that can be processed by <code><a href="https://rdrr.io/r/grDevices/xy.coords.html" class="external-link">xy.coords()</a></code>.  If
xy-coordinate based polygons are open, they will be closed by adding an
edge from the last point to the first.</p></dd>


<dt id="arg-extent">extent<a class="anchor" aria-label="anchor" href="#arg-extent"></a></dt>
<dd><p>Either an object representing the spatial extent of the 3D scene
(either from the <code>raster</code>, <code>terra</code>, <code>sf</code>, or <code>sp</code> packages),
a length-4 numeric vector specifying <code>c("xmin", "xmax", "ymin", "ymax")</code>, or the spatial object (from
the previously aforementioned packages) which will be automatically converted to an extent object.</p></dd>


<dt id="arg-material">material<a class="anchor" aria-label="anchor" href="#arg-material"></a></dt>
<dd><p>Default <code>"grey80"</code>. If a color string, this will specify the color of the sides/base of the building
Alternatively (for more customization), this can be a r<code>ayvertex::material_list()</code> object to specify
the full color/appearance/material options for the resulting <code>ray_mesh</code> mesh.</p></dd>


<dt id="arg-roof-material">roof_material<a class="anchor" aria-label="anchor" href="#arg-roof-material"></a></dt>
<dd><p>Default <code>NA</code>, defaults to the material specified in <code>material</code>. If a color string, this will specify the color of the roof of the building.
Alternatively (for more customization), this can be a <code><a href="https://www.rayvertex.com/reference/material_list.html" class="external-link">rayvertex::material_list()</a></code> object to specify
the full color/appearance/material options for the resulting <code>ray_mesh</code> mesh.</p></dd>


<dt id="arg-angle">angle<a class="anchor" aria-label="anchor" href="#arg-angle"></a></dt>
<dd><p>Default <code>45</code>. Angle of the roof.</p></dd>


<dt id="arg-zscale">zscale<a class="anchor" aria-label="anchor" href="#arg-zscale"></a></dt>
<dd><p>Default <code>1</code>. The ratio between the x and y spacing (which are assumed to be equal) and the z axis in the original heightmap.</p></dd>


<dt id="arg-scale-data">scale_data<a class="anchor" aria-label="anchor" href="#arg-scale-data"></a></dt>
<dd><p>Default <code>1</code>. How much to scale the <code>top</code>/<code>bottom</code> value when rendering. Use
<code>zscale</code> to adjust the data to account for <code>x</code>/<code>y</code> grid spacing, and this argument to scale the data
for visualization.</p></dd>


<dt id="arg-relative-heights">relative_heights<a class="anchor" aria-label="anchor" href="#arg-relative-heights"></a></dt>
<dd><p>Default <code>TRUE</code>. Whether the heights specified in <code>roof_height</code> and <code>base_height</code> should
be measured relative to the underlying heightmap.</p></dd>


<dt id="arg-heights-relative-to-centroid">heights_relative_to_centroid<a class="anchor" aria-label="anchor" href="#arg-heights-relative-to-centroid"></a></dt>
<dd><p>Default <code>FALSE</code>. Whether the heights should be measured in absolute
terms, or relative to the centroid of the polygon.</p></dd>


<dt id="arg-roof-height">roof_height<a class="anchor" aria-label="anchor" href="#arg-roof-height"></a></dt>
<dd><p>Default <code>1</code>. Height from the base of the building to the start of the roof.</p></dd>


<dt id="arg-base-height">base_height<a class="anchor" aria-label="anchor" href="#arg-base-height"></a></dt>
<dd><p>Default <code>0</code>. Height of the base of the roof.</p></dd>


<dt id="arg-data-column-top">data_column_top<a class="anchor" aria-label="anchor" href="#arg-data-column-top"></a></dt>
<dd><p>Default <code>NULL</code>. A string indicating the column in the <code>sf</code> object to use
to specify the top of the extruded polygon.</p></dd>


<dt id="arg-data-column-bottom">data_column_bottom<a class="anchor" aria-label="anchor" href="#arg-data-column-bottom"></a></dt>
<dd><p>Default <code>NULL</code>. A string indicating the column in the <code>sf</code> object to use
to specify the bottom of the extruded polygon.</p></dd>


<dt id="arg-heightmap">heightmap<a class="anchor" aria-label="anchor" href="#arg-heightmap"></a></dt>
<dd><p>Default <code>NULL</code>. Automatically extracted from the rgl window–only use if auto-extraction
of matrix extent isn't working. A two-dimensional matrix, where each entry in the matrix is the elevation at that point.
All points are assumed to be evenly spaced.</p></dd>


<dt id="arg-holes">holes<a class="anchor" aria-label="anchor" href="#arg-holes"></a></dt>
<dd><p>Default <code>0</code>. If passing in a polygon directly, this specifies which index represents
the holes in the polygon. See the <code>earcut</code> function in the <code>decido</code> package for more information.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Default <code>1</code>. Transparency of the polygons.</p></dd>


<dt id="arg-lit">lit<a class="anchor" aria-label="anchor" href="#arg-lit"></a></dt>
<dd><p>Default <code>TRUE</code>. Whether to light the polygons.</p></dd>


<dt id="arg-flat-shading">flat_shading<a class="anchor" aria-label="anchor" href="#arg-flat-shading"></a></dt>
<dd><p>Default <code>FALSE</code>. Set to <code>TRUE</code> to have nicer shading on the 3D polygons. This comes
with the slight penalty of increasing the memory use of the scene due to vertex duplication. This
will not affect software or high quality renders.</p></dd>


<dt id="arg-light-altitude">light_altitude<a class="anchor" aria-label="anchor" href="#arg-light-altitude"></a></dt>
<dd><p>Default <code>c(45, 30)</code>. Degree(s) from the horizon from which to light the polygons.</p></dd>


<dt id="arg-light-direction">light_direction<a class="anchor" aria-label="anchor" href="#arg-light-direction"></a></dt>
<dd><p>Default <code>c(315, 225)</code>. Degree(s) from north from which to light the polygons.</p></dd>


<dt id="arg-light-intensity">light_intensity<a class="anchor" aria-label="anchor" href="#arg-light-intensity"></a></dt>
<dd><p>Default <code>1</code>. Intensity of the specular highlight on the polygons.</p></dd>


<dt id="arg-light-relative">light_relative<a class="anchor" aria-label="anchor" href="#arg-light-relative"></a></dt>
<dd><p>Default <code>FALSE</code>. Whether the light direction should be taken relative to the camera,
or absolute.</p></dd>


<dt id="arg-clear-previous">clear_previous<a class="anchor" aria-label="anchor" href="#arg-clear-previous"></a></dt>
<dd><p>Default <code>FALSE</code>. If <code>TRUE</code>, it will clear all existing polygons.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to pass to <code><a href="https://dmurdoch.github.io/rgl/dev/reference/primitives.html" class="external-link">rgl::triangles3d()</a></code>.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Load and visualize building footprints from Open Street Map</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/osmdata/" class="external-link">osmdata</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">osm_bbox</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">121.9472</span>, <span class="fl">36.6019</span>, <span class="op">-</span><span class="fl">121.9179</span>, <span class="fl">36.6385</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Get buildings from OpenStreetMap</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/opq.html" class="external-link">opq</a></span><span class="op">(</span><span class="va">osm_bbox</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/add_osm_feature.html" class="external-link">add_osm_feature</a></span><span class="op">(</span><span class="st">"building"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/osmdata_sf.html" class="external-link">osmdata_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span></span></span>
<span class="r-in"><span><span class="va">osm_data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Get roads from OpenStreetMap</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/opq.html" class="external-link">opq</a></span><span class="op">(</span><span class="va">osm_bbox</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/add_osm_feature.html" class="external-link">add_osm_feature</a></span><span class="op">(</span><span class="st">"highway"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://docs.ropensci.org/osmdata/reference/osmdata_sf.html" class="external-link">osmdata_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span></span></span>
<span class="r-in"><span><span class="va">osm_road</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Get extent</span></span></span>
<span class="r-in"><span><span class="va">building_polys</span> <span class="op">=</span> <span class="va">osm_data</span><span class="op">$</span><span class="va">osm_polygons</span></span></span>
<span class="r-in"><span><span class="va">osm_dem</span> <span class="op">=</span> <span class="fu">elevatr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/elevatr/man/get_elev_raster.html" class="external-link">get_elev_raster</a></span><span class="op">(</span><span class="va">building_polys</span>, z <span class="op">=</span> <span class="fl">11</span>, clip <span class="op">=</span> <span class="st">"bbox"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html" class="external-link">extent</a></span><span class="op">(</span><span class="va">building_polys</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Crop DEM, but note that the cropped DEM will have an extent slightly different than what's </span></span></span>
<span class="r-in"><span><span class="co"># specified in `e`. Save that new extent to `new_e`.</span></span></span>
<span class="r-in"><span><span class="va">osm_dem</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html" class="external-link">extent</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span></span></span>
<span class="r-in"><span><span class="va">new_e</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">osm_dem</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="raster_to_matrix.html">raster_to_matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span></span></span>
<span class="r-in"><span><span class="va">osm_mat</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Visualize areas less than one meter as water (approximate tidal range)</span></span></span>
<span class="r-in"><span><span class="va">osm_mat</span><span class="op">[</span><span class="va">osm_mat</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span><span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">osm_mat</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">rayimage</span><span class="fu">::</span><span class="fu"><a href="https://www.rayimage.dev/reference/render_resized.html" class="external-link">render_resized</a></span><span class="op">(</span>mag<span class="op">=</span><span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="sphere_shade.html">sphere_shade</a></span><span class="op">(</span>texture <span class="op">=</span> <span class="st">"desert"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_overlay.html">add_overlay</a></span><span class="op">(</span><span class="fu"><a href="generate_polygon_overlay.html">generate_polygon_overlay</a></span><span class="op">(</span><span class="va">building_polys</span>, extent <span class="op">=</span> <span class="va">new_e</span>,</span></span>
<span class="r-in"><span>                                       heightmap <span class="op">=</span> <span class="va">osm_mat</span>, </span></span>
<span class="r-in"><span>                                       linewidth <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>                                       resolution_multiply <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>, rescale_original <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_overlay.html">add_overlay</a></span><span class="op">(</span><span class="fu"><a href="generate_line_overlay.html">generate_line_overlay</a></span><span class="op">(</span><span class="va">osm_road</span><span class="op">$</span><span class="va">osm_lines</span>, extent <span class="op">=</span> <span class="va">new_e</span>,</span></span>
<span class="r-in"><span>                                    heightmap <span class="op">=</span> <span class="va">osm_mat</span>, </span></span>
<span class="r-in"><span>                                    linewidth <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>                                    resolution_multiply <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>, rescale_original <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="plot_3d.html">plot_3d</a></span><span class="op">(</span><span class="va">osm_mat</span>, water <span class="op">=</span> <span class="cn">TRUE</span>, windowsize <span class="op">=</span> <span class="fl">800</span>, watercolor <span class="op">=</span> <span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>          zscale <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>          background <span class="op">=</span> <span class="st">"pink"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Render buildings</span></span></span>
<span class="r-in"><span><span class="fu">render_buildings</span><span class="op">(</span><span class="va">building_polys</span>,  flat_shading  <span class="op">=</span> <span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>                 angle <span class="op">=</span> <span class="fl">30</span> , heightmap <span class="op">=</span> <span class="va">osm_mat</span>, </span></span>
<span class="r-in"><span>                 material <span class="op">=</span> <span class="st">"white"</span>, roof_material <span class="op">=</span> <span class="st">"white"</span>,</span></span>
<span class="r-in"><span>                 extent <span class="op">=</span> <span class="va">new_e</span>, roof_height <span class="op">=</span> <span class="fl">3</span>, base_height <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                 zscale<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render_camera.html">render_camera</a></span><span class="op">(</span>theta<span class="op">=</span><span class="fl">220</span>, phi<span class="op">=</span><span class="fl">22</span>, zoom<span class="op">=</span><span class="fl">0.45</span>, fov<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render_snapshot.html">render_snapshot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Linking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is FALSE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: sp</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Mosaicing &amp; Projecting</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping DEM to bbox</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Note: Elevation units are in meters.</span>
<span class="r-plt img"><img src="render_buildings-1.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="run_documentation.html">run_documentation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">#Zoom in to show roof details and render with render_highquality()</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render_camera.html">render_camera</a></span><span class="op">(</span>fov<span class="op">=</span><span class="fl">110</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render_highquality.html">render_highquality</a></span><span class="op">(</span>camera_location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18.22</span>, <span class="fl">0.57</span>, <span class="op">-</span><span class="fl">50.83</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   camera_lookat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20.88</span>, <span class="op">-</span><span class="fl">2.83</span>, <span class="op">-</span><span class="fl">38.87</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   focal_distance <span class="op">=</span> <span class="fl">13</span>, </span></span>
<span class="r-in"><span>                   lightdirection <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="render_buildings-2.png" alt="" width="768" height="768"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.tylermw.com" class="external-link">Tyler Morgan-Wall</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

